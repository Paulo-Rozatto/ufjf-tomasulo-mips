function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},s=e.parcelRequireccd2;null==s&&((s=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var s={id:t,exports:{}};return n[t]=s,e.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){r[t]=e},e.parcelRequireccd2=s),s.register("791ri",(function(e,n){t(e.exports,"init",(()=>y)),t(e.exports,"clearActive",(()=>b)),t(e.exports,"setInstructions",(()=>v)),t(e.exports,"updateRegisters",(()=>L)),t(e.exports,"updateMemory",(()=>j)),t(e.exports,"issue",(()=>M)),t(e.exports,"execute",(()=>q)),t(e.exports,"writeBack",(()=>k)),t(e.exports,"updateOutput",(()=>P));var r=s("5jcMS"),i=s("2FxLf");const o=document.querySelector("#instructions-list"),a=document.querySelector("#memory-list"),l=document.querySelector("#registers-list"),d=document.querySelector("#store-buffer-list"),c=document.querySelector("#load-buffer-list"),p=document.querySelector("#rs-fadd"),u=document.querySelector("#rs-fmult"),f=document.querySelector("#adder"),$=document.querySelector("#pc"),m=document.querySelector("#clock"),S=document.querySelector("#output"),g=new Set;function h(t,e){const n=document.createElement("li");return n.id=t,n.classList="list-group-item text-center",n.innerText=e,n.title=(0,r.binToAssembly)(e),n}function x(t,e,n){const r=document.createElement("li");return r.id=t,r.classList.add("list-group-item"),r.innerHTML=`\n    <strong class="float-start">${e}:</strong>\n    <span class="float-end">${n}</span>`,r}function _(t){const e=document.createElement("li");return e.classList="list-group-item d-inline-flex justify-content-between",e.id=t,e.innerHTML='\n    <strong title="status">free</strong>\n    <span title="command">oooo</span>\n    <span title="Vj">0.00</span>\n    <span title="Vk">0.00</span>\n    <span title="Qj">0.00</span>\n    <span title="Qk">0.00</span>',e}function y(){o.innerHTML="",a.innerHTML="",l.innerHTML="",d.innerHTML="",c.innerHTML="",p.innerHTML="",u.innerHTML="",$.innerText="00",m.innerText="00";const t="0".repeat(32),e=t=>"0x"+(8*t).toString(16).padStart(3,"0"),n=t=>"$"+t.toString(10).padStart(2,"0");for(let n=0;n<64;n++){const r=x(`mem-${n}`,e(n),t);a.appendChild(r)}for(let e=0;e<32;e++){const r=x(`reg-${e}`,n(e),t);l.appendChild(r)}for(let t=1;t<=3;t++){const e=_(`rs-${t}`);p.appendChild(e)}for(let t=4;t<=5;t++){const e=_(`rs-${t}`);u.appendChild(e)}for(let e=6;e<=9;e++){const n=h(`fld-${e}`,t);c.appendChild(n)}for(let n=10;n<=14;n++){const r=x(`fsd-${n}`,e(0),t);d.appendChild(r)}for(let e=1;e<=3;e++){const n=h(`ins-${e}`,t);o.appendChild(n)}}function T(t,e=-1){t.classList.add("active"),e<0&&(e=t.id.split("-")[1],e=parseInt(e)-1),t.parentElement.scrollTo({top:t.clientHeight*e,behavior:"smooth"}),g.add(t)}function b(){g.forEach((t=>t.classList.remove("active"))),g.clear()}function v(t){const e=document.createDocumentFragment();o.innerHTML="";for(let n=0;n<t.length;n++){const r=h(`ins-${n+1}`,t[n]);e.appendChild(r)}o.appendChild(e)}function E(t){if("fld"===t.opName)return void function(t){const e=`fld-${t.id}`,n=document.getElementById(e);n.innerText=t.vk.toString(2).padStart(32,"0"),T(n)}(t);if("fsd"===t.opName)return void function(t){const e=`fsd-${t.id}`,n=document.getElementById(e);n.children[0].innerText="0x"+t.vk.toString(16).padStart(3,"0"),n.children[1].innerText=t.vj.toString(2).padStart(32,"0"),n.children[1].title=t.vj.toFixed(2),T(n,t.id-10)}(t);const e=`rs-${t.id}`,n=document.getElementById(e);n.innerHTML=`\n    <strong title="status">${t.busy?"busy":"free"}</strong>\n    <span title="command">${t.opName}</span>\n    <span title="Vj">${t.vj.toFixed(2)}</span>\n    <span title="Vk">${t.vk.toFixed(2)}</span>\n    <span title="Qj">${t.qj.toFixed(2)}</span>\n    <span title="Qk">${t.qk.toFixed(2)}</span>`,T(n)}function L(t){t.forEach((t=>{let{id:e,value:n}=t;const r=document.getElementById(`reg-${e}`);r.title=n.toFixed(2),r.lastElementChild.innerText=n.toString(2).slice(0,31).padStart(32,"0")+"...",T(r)}))}function j(t,e){const n=document.getElementById(`mem-${t}`);n.title=e.toFixed(2),n.lastElementChild.innerText=e.toString(2).slice(0,31).padStart(32,"0")+"...",T(n)}function M(t,e,n){if(m.innerText=n.get().toString().padStart(2,"0"),e){$.innerText=e.get().toString().padStart(2,"0");let t=(e.get()>>2)-1;T(o.children[t])}t&&E(t)}function q(t,e,n){t&&function(t){if(!t.station)return;const e=`rs#${t.station.id}`,n=t.station.cicles.toString().padStart(2,"0");f.innerHTML=`\n    <strong title="status">${t.busy?"busy":"free"}</strong>\n    <span title="id da station">${e}</span>\n    <span title="Vk">${n} cycles</span>`,T(f)}(t),e&&function(t){if(!t.station)return;const e=`rs#${t.station.id}`,n=t.station.cicles.toString().padStart(2,"0");multiplier.innerHTML=`\n    <strong title="status">${t.busy?"busy":"free"}</strong>\n    <span title="id da station">${e}</span>\n    <span title="Vk">${n} cycles</span>`,T(multiplier)}(e),n&&E(n)}function k(t,e){t.forEach((t=>E(t))),L(e)}function P(t,e,n,s,o,a){const l=n?n.toString(2).padStart(32,"0"):"-",d=n?(0,r.binToAssembly)(l):"-",c=s[i.ADD_RS].map((t=>`- ${t.id.toString().padStart(2,"0")}: ${t.busy?t.opName:"free"}`)).join("\n"),p=s[i.MUL_RS].map((t=>`- ${t.id.toString().padStart(2,"0")}: ${t.busy?t.opName:"free"}`)).join("\n"),u=`___________________________\n\nCiclo: ${e.toString().padStart(2,"0")}\nPC: ${t.toString().padStart(2,"0")}\nInstrução: ${l}\nAssembly: ${d}\nEstações de Adição:\n${c}\nEstações de Multiplicação:\n${p}\nRegistradores: \n${[...o].map(((t,e)=>`- $${e.toString().padStart(2,"0")}: ${t.toFixed(2)}`)).join("\n")}\nMemória:\n${[...a].map(((t,e)=>`- 0x${(8*e).toString(16).padStart(3,"0")}: ${t.toFixed(2)}`)).join("\n")}\n\n`;let f=S.scrollHeight;S.value+=u,e>0&&S.scrollTo({top:f,behavior:"smooth"})}y()})),s.register("5jcMS",(function(e,n){t(e.exports,"binToAssembly",(()=>i)),t(e.exports,"assemblyToBin",(()=>o));var r=s("2FxLf");function i(t){const e=127&(t=parseInt(t,2)),n=t>>12&7;if(0===e)return"nop";let s=r.operations[e];const i=s.getParams(t);switch(e){case r.TYPES.R:return s=s[n],`${s.name} $${i.rd}, $${i.rs1}, $${i.rs2}`;case r.TYPES.I:return`${s.name} $${i.rd}, ${i.imm}($${i.rs1})`;case r.TYPES.S:return`${s.name} $${i.rs2}, ${i.imm}($${i.rs1})`}return e===r.TYPES.R?(s=s[n],`${s.name} $${i.rd}, $${i.rs1}, $${i.rs2}`):`${s.name} $${i.rd}, ${i.imm}($${i.rs1})`}function o(t){const e=t.split(/\s|\(/).map((t=>t.replace(",",""))),n=e[0];e.shift();let s,i,o,a,l,d,c=e.map((t=>function(t,e=5){return parseInt(t.replace("$","")).toString(2).padStart(e,"0")}(t)));switch(n){case"fadd":return s=r.TYPES.R.toString(2).padStart(7,"0"),i="001",l=c[0],o=c[1],a=c[2],`0000000${a}${o}${i}${l}${s}`;case"fsub":return s=r.TYPES.R.toString(2).padStart(7,"0"),i="010",l=c[0],o=c[1],a=c[2],`0000000${a}${o}${i}${l}${s}`;case"fmul":return s=r.TYPES.R.toString(2).padStart(7,"0"),i="011",l=c[0],o=c[1],a=c[2],`0000000${a}${o}${i}${l}${s}`;case"fdiv":return s=r.TYPES.R.toString(2).padStart(7,"0"),i="100",l=c[0],o=c[1],a=c[2],`0000000${a}${o}${i}${l}${s}`;case"fld":return s=r.TYPES.I.toString(2).padStart(7,"0"),o=c[2],l=c[0],d=c[1].toString(2).padStart(12,"0"),`${d}${o}000${l}${s}`;case"fsd":return s=r.TYPES.S.toString(2).padStart(7,"0"),o=c[2],a=c[0],d=c[1].padStart(12,"0"),`${d.slice(0,7)}${a}${o}000${d.slice(7)}${s}`}return"whatf"}})),s.register("2FxLf",(function(e,n){t(e.exports,"TYPES",(()=>r)),t(e.exports,"ADD_RS",(()=>s)),t(e.exports,"MUL_RS",(()=>i)),t(e.exports,"cdb",(()=>o)),t(e.exports,"pc",(()=>a)),t(e.exports,"clock",(()=>l)),t(e.exports,"instructions",(()=>d)),t(e.exports,"operations",(()=>c)),t(e.exports,"stations",(()=>u)),t(e.exports,"resetStations",(()=>f)),t(e.exports,"adder",(()=>$)),t(e.exports,"multiplier",(()=>m)),t(e.exports,"loadStoreQueue",(()=>S));const r={R:1,I:2,S:3},s=1,i=0,o={busy:!1,result:0,station:null},a={value:0,next(){this.value+=4},reset(){this.value=0},get(){return this.value}},l={value:0,next(){this.value+=1},reset(){this.value=0},get(){return this.value}},d={_data:[],set(t){this._data=t},get(t){return this._data[t/4]}},c={1:{1:{name:"fadd",op:(t,e)=>t+e,cicles:1,station:s},2:{name:"fsub",op:(t,e)=>t-e,cicles:1,station:s},3:{name:"fmul",op:(t,e)=>t*e,cicles:10,station:i},4:{name:"fdiv",op:(t,e)=>t/e,cicles:40,station:i},getParams:t=>({rs1:t>>15&31,rs2:t>>20&31,rd:t>>7&31})},2:{name:"fld",op:(t,e,n,r)=>r[n[t]+e>>3],cicles:1,station:2,getParams:t=>({rs1:t>>15&31,rd:t>>7&31,imm:t>>20&4095})},3:{name:"fsd",op:(t,e,n)=>n[t]+e,cicles:1,station:3,getParams:t=>({rs1:t>>15&31,rs2:t>>20&31,imm:t>>7&31|t>>20&131040})}},p={id:0,busy:0,op:0,opName:"",vj:0,vk:0,qj:0,qk:0,cicles:0},u={[s]:[],[i]:[],2:[],3:[]},f=()=>{for(const t of Object.values(u))t.forEach((t=>{t.busy=!1,t.vj=0,t.vk=0,t.qj=0,t.qk=0,t.cicles=0}))};for(let t=1;t<=3;t++){let e={...p};e.id=t,e.opName="fadd",u[s].push(e)}for(let t=4;t<=5;t++){let e={...p};e.id=t,e.opName="fmul",u[i].push(e)}for(let t=6;t<=9;t++){let e={...p};e.id=t,e.opName="fld",u[2].push(e)}for(let t=10;t<=14;t++){let e={...p};e.id=t,e.opName="fsd",u[3].push(e)}const $={busy:!1,ready:!1,station:null,result:0},m={busy:!1,ready:!1,station:null,result:0},S={_data:new Array(9).fill(0),_head:0,_tail:0,push(t){this._data[this._tail]=t,this._tail=(this._tail+1)%this._data.length},pop(){const t=this._data[this._head];return this._head=(this._head+1)%this._data.length,t},head(){return this._data[this._head]},reset(){this._data.fill(0),this._head=0,this._tail=0}}})),s("791ri");
//# sourceMappingURL=index.fdc84ff7.js.map
